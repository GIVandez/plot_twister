Класс DatabaseModel
V create_user(username: text, password: text, email: text) -> success: bool
Создание записи для нового пользователя

Аргументы:

username - логин пользователя
password - пароль пользователя
email - email пользователя
Алгоритм:

Выполнить поиск пользователя в таблице user по логину вызовом метода self.user_exist(login)
В случае нахождения пользователя по логину в БД вернуть success=False
В случае ненахождения пользователя по логину создать в таблице user БД запись о новом пользователе с данными login, password, email
Вернуть success=True


V read_user_info(username: str) -> user {username: str, password: str, email: str}
Получение информации о пользователе (логин, пароль, email)

Аргументы:

username - логин пользователя
password - пароль пользователя
email - email пользователя
Алгоритм:

Выполнить поиск информации о пользователе в таблице user БД по его логину (username)
Вернуть результат поиска в виде словаря user


V update_user_info(username: str, password=None: str, email=None: str, role=None: str) -> success: bool
Изменение информации о пользователе

Аргументы:

username - логин пользователя
password - пароль пользователя
email - email пользователя
role - роль пользователя
Алгоритм:

Выполнить поиск записи о пользователе с логином username в таблице user БД и обновить информацию о нем в зависимости от переданных аргументов (password, email, role)
В случае успеха вернуть success=True, в случае провала success=False
V delete_user(username) -> success: bool
Удаление пользователя и его проектов

Аргументы:

username - логин пользователя
Алгоритм:

Выполнить поиск записи о пользователе с логином username в таблице user БД
Удалить найденную запись с каскадным удалением записей в дочерних таблицах
В случае успеха вернуть success=True, иначе success=False


V user_exist(username: text) -> exist: bool
Проверка наличия пользователя с переданным логином

Аргументы:

username - логин проверяемого пользователя
Алгоритм:

Выполнить поиск пользователя по username в таблице user
В случае нахождения записи о пользователе вернуть exist=True, в противном случае вернуть exist=False


V user_project_exist(project_name:text, username: text) -> exist:bool
Проверка наличия проекта с переданным названием

Аргументы:

project_name - название проверяемого проекта
username - логин проверяемого пользователя
Алгоритм:

Выполнить поиск проекта по project_name с владельцем username в таблице project
В случае нахождения записи о проекте вернуть exist=True, в противном случае вернуть exist=False
read_user_projects(username: str) -> projects: list[int]
Получение списка названий проектов пользователя

Аргументы:

username - логин пользователя
Алгоритм:

Выполнить поиск всех записей о проектах, создателем которых является пользователь с логином username, в таблице project
Вернуть список с результатами поиска в виде списка list


V create_project(name: text, owner_id: int) -> success: bool
Создание нового проекта пользователя

Аргументы:

name- название проекта
owner_id - id владельца проекта
Алгоритм:

Создать в таблице project БД запись о новом проекте с данными name, owner_id
В случае успеха вернуть success=True, иначе success=False


V read_project_info(project_id: int) -> project_info: {project_name: str, owner_username: str}
Получение информации о проекте пользователя

Аргументы:

project_id - id проекта
Алгоритм:

Найти в таблице project БД по project_id информацию о проекте и вернуть ее в виде словаря


V update_project_name(project_id: int, new_name: text) -> success: bool
Изменение названия проекта

Аргументы:

project_id - id проекта
new_name- новое название проекта
Алгоритм:

Найти в таблице project БД по project_id запись о проекте и изменить название проекта на new_name
В случае успеха вернуть success=True, иначе success=False


V delete_project(project_id: int) -> success: bool
Удаление проекта пользователя

Аргументы:

project_id - id проекта
Алгоритм:

Найти в таблице project БД по project_id запись о проекте и удалить ее каскадно
Удалить все изображения кадров, принадлежащих проекту
В случае успеха вернуть success=True, иначе success=False


create_frame(project_id: int, start_time: int, end_time: int, pic_path: str, description=None: str) -> success: bool
Создание записи о новом кадре

Аргументы: project_id - id родительского проекта проекта start_time - время начала кадра в секундах end_time - время конца кадра в секундах pic_path - относительный путь к изображению кадра на сервере description - описание кадра, по умолчанию присваивается значение None

Алгоритм:

Создать в таблице frame БД запись о новом кадре с информацией (project_id, start_time, end_time, pic_path, desctiption)
В случае успеха вернуть success=True, в случае провала success=False


read_frame_info(frame_id) -> frame {description: str, start_time: int, end_time: int, pic_path: str}
Получение информации о кадре

Аргументы:

frame_id - id кадра
Алгоритм:

Выполнить поиск информации о кадре в таблице frame БД по его id (frame_id)
Вернуть найденную информацию в виде словаря frame


V update_frame_info(frame_id: int, start_time=None: int, end_time=None: int, pic_path=None: str, description=None: str) -> success: bool
Изменение информации о кадре

Аргументы:

frame_id - id кадра
start_time - время начала кадра в секундах
end_time - время конца кадра в секундах
pic_path - относительный путь к изображению кадра на сервере
description - описание кадра
Алгоритм:

Обновить start_time кадра в таблице frame БД, если аргумент start_time передан в функцию
Обновить end_time кадра в таблице frame БД, если аргумент end_time передан в функцию
Обновить pic_path кадра в таблице frame БД, если аргумент pic_path передан в функцию
Обновить description кадра в таблице frame БД, если аргумент description передан в функцию
В случае успеха вернуть success=True, в случае провала success=False
delete_frame(frame_id: int) -> success: bool
Удаление записи о кадре

Аргументы:

frame_id - id кадра
Алгоритм:

Выполнить поиск записи о кадре по id (frame_id) в таблице frame БД
Удалить изображение кадра по пути, хранящемуся в найденной записи
Удалить найденную запись
В случае успеха вернуть success=True, иначе success=False


change_pic(frame_id: int, new_pic_path: str) -> success: bool
Изменение изображения кадра

Аргументы:

frame_id - id кадра
new_pic_path - путь к новому изображению кадра
Алгоритм:

Выполнить поиск записи о кадре по id (frame_id) в таблице frame БД
Удалить изображение кадра по пути, хранящемуся в найденной записи
Сохранить новый файл с именем new_pic_path.split("/")[-1] в хранилище по пути new_pic_path
В случае успеха вернуть success=True, в случае провала success=False


read_pic_path(frame_id) -> pic_path: str
Получение пути к изображению кадра

Аргументы:

frame_id - id кадра
Алгоритм:

Выполнить поиск записи о кадре по id (frame_id) в таблице frame БД
Вернуть pic_path найденной записи в виде переменной pic_path


create_page(project_id: int, number: int, text=None: str) -> success: bool
Создание записи о новой странице сценария

Аргументы: project_id - id родительского проекта number - порядковый номер страницы в сценарии проекта text - текстовое содержание страницы, по умолчанию принимает значение None

Алгоритм:

Создать запись с информацией о новой странице (project_id, number, text) в таблице page БД
В случае успеха вернуть success=True, в случае провала success=False


read_page_info(page_id: int) -> page {number: int, text: str}
Получение информации о странице сценария

Аргументы:

page_id - id страницы
Алгоритм:

Выполнить поиск записи о странице по id (page_id) в таблице page БД
Вернуть информацию о найденной записи в виде словаря page


V update_page_text(page_id: int, text: str) -> success: bool
Изменение информации о странице сценария

Аргументы:

page_id - id страницы
text - текстовое содержание страницы, по умолчанию принимает значение None
Алгоритм:

Обновить текст страницы (text) в таблице page БД
В случае успеха вернуть success=True, в случае провала success=False
delete_page(page_id: int) -> success: bool
Удаление записи о странице сценария

Аргументы:

page_id - id страницы
Алгоритм:

Выполнить поиск записи о странице по id (page_id) в таблице page БД
Удалить найденную запись
В случае успеха вернуть success=True, в случае провала success=False


V update_page_number(page_id: int, new_page_number: int) -> success: bool
Изменение номера страницы сценария

Аргументы:

page_id - id страницы
new_page_number - новый порядковый номер страницы в сценарии проекта
Алгоритм:

Выполнить поиск записи о странице по id (page_id) в таблице page БД
Заменить поле number найденной записи на значение new_page_number
В случае успеха вернуть success=True, в случае провала success=False