POST /api/frame/dragAndDropFrame
Входные данные

{
    "frame_id": int;
    "frame_number": int;
}
Описание

Перетаскивание кадра в списке кадров

Коды возврата

200 - Успешно
400 - Некорректный номер кадра или конфликт позиций
404 - Кадр не найден
403 - Нет прав на изменение проекта
500 - Внутренняя ошибка сервера

POST /api/frame/updateNumber
Входные данные

{
    "frame_id": int;
    "frame_number": int;
}
Описание

Обновление порядкового номера одного кадра

Коды возврата

200 - Успешно
404 - Кадр не найден
403 - Нет прав на изменение кадра
500 - Внутренняя ошибка сервера

DELETE /api/graphic/deleteImage
Входные данные

{
    "frame_id": int
}
Описание

Удаление изображения кадра

Коды возврата

200 - Успешно
400 - Нет изображения для удаления
404 - Кадр не найден
403 - Нет прав на изменение кадра
500 - Внутренняя ошибка сервера

GET /api/frame/{project_id}/loadFrames
Входные данные

{
   "frames":
    [
        {
      	    "frame_id": int;
            "description": str
            "start_time": int
            "end_time": int
            "pic_path": str
            "conected": str
            "number": int
     	},
        {
      	    "frame_id": int;
            "description": str
            "start_time": int
            "end_time": int
            "pic_path": str
            "conected": str
            "number": int
     	},        
	{
      	    "frame_id": int;
            "description": str
            "start_time": int
            "end_time": int
            "pic_path": str
            "conected": str
            "number": int
     	}
   ];
}
Описание

Загрузка кадров проекта пользователя

Коды возврата

200 - Успешно
404 - Проект не найден
403 - Нет прав на просмотр проекта
204 - В проекте нет кадров
500 - Внутренняя ошибка сервера

POST /api/frame/redoStartTime
Входные данные

{
    "frame_id": int;
    "start_time": int;
}
Описание

Изменение начала времени кадра

Коды возврата

200 - Успешно
400 - Новое время начала позже времени конца кадра
404 - Кадр не найден
403 - Нет прав на изменение кадра
500 - Внутренняя ошибка сервера

POST /api/frame/redoEndTime
Входные данные

{
    "frame_id": int;
    "start_time": int;
}
Описание

Изменение конца времени кадра

Коды возврата

200 - Успешно
400 - Новое время конца раньше времени начала кадра
404 - Кадр не найден
403 - Нет прав на изменение кадра
500 - Внутренняя ошибка сервера

POST /api/frame/newFrame
Входные данные

{
    "project_id": int;
    "description": str;
    "start_time": int;
    "end_time": int;
    "conected": int=None;
}
Выходные данные

{
    "frame_id": int;
}
Описание

Создание кадра в раскадровке

Коды возврата

201 - Кадр создан
400 - Время начала позже времени конца или некорректный связанный кадр
404 - Проект не найден
403 - Нет прав на добавление кадра в проект
500 - Внутренняя ошибка сервера

DELETE /api/frame/deleteFrame
Входные данные

{
    "frame_id": int;
}
Описание

Удаление кадра из раскадровки

Коды возврата

200 - Успешно
404 - Кадр не найден
403 - Нет прав на удаление кадра
409 - Кадр связан с другими элементами, удаление невозможно
500 - Внутренняя ошибка сервера

POST /api/frame/redoDescriprion
Входные данные

{
    "frame_id": int;
    "description": str;
}
Описание

Изменение описания кадра

Коды возврата

200 - Успешно
400 - Пустое описание
404 - Кадр не найден
403 - Нет прав на изменение кадра
500 - Внутренняя ошибка сервера

POST /api/frame/uploadImage
Входные данные

{
    "frame_id": int;
    "picture": FormData
}
Описание

Загрузка изображения

Коды возврата

200 - Успешно
400 - Неподдерживаемый формат изображения или превышен размер
404 - Кадр не найден
403 - Нет прав на изменение кадра
413 - Слишком большой размер файла
500 - Внутренняя ошибка сервера

POST /api/frame/connectFrame
Входные данные

{
    "frame_id": int;
    "page_id": int;
}
Описание

Связь кадра и страницы

Коды возврата

200 - Успешно (связь установлена)
400 - Неверный формат данных (отсутствуют или некорректные frame_id/page_id)
404 - Кадр или страница не найдены (один из объектов не существует)
409 - Конфликт (кадр уже связан с другой страницей или другая логическая ошибка)
403 - Нет прав на изменение кадра или страницы
422 - Невозможно обработать запрос (например, попытка связать кадр со страницей из другого проекта)
500 - Внутренняя ошибка сервера

POST /api/frame/disconnectFrame
Входные данные

{
    "frame_id": int;
}
Описание

Удаление звязи кадра и страницы

Коды возврата

200 - Успешно (связь удалена)
204 - Успешно (связи не существовало - идиоматический вариант для удаления)
400 - Неверный формат данных (отсутствуют или некорректные frame_id/page_id)
404 - Кадр или страница не найдены (один из объектов не существует)
403 - Нет прав на изменение кадра или страницы
409 - Конфликт (невозможно удалить связь из-за бизнес-правил, например, обязательная связь)
422 - Связь между указанными кадром и страницей не существует
500 - Внутренняя ошибка сервера

POST /api/auth/login
Входные данные

{
   "login": str;
   "password": str;
}
Выходные данные

{
   "access_token": int;
}
Описание

Вход пользователя в свой аккаунт

Коды возврата

200 - Успешно
400 - Неверный формат данных
401 - Неверный логин или пароль
423 - Учетная запись заблокирована
500 - Внутренняя ошибка сервера

POST /api/auth/register
Входные данные

{
   "login": str;
   "password": str;
   "email": str;
}
Описание

Регистрация пользователя

Коды возврата

201 - Пользователь создан
400 - Логин или email уже заняты, слабый пароль
409 - Пользователь с таким логином или email уже существует
500 - Внутренняя ошибка сервера

POST /api/auth/logout
Входные данные

{
   "user_id": int;
}
Описание

Выход пользователя из своего аккаунта

Коды возврата

200 - Успешно
401 - Неавторизованный доступ (токен недействителен)
404 - Сессия не найдена
500 - Внутренняя ошибка сервера



GET/api/page/{project_id}/loadPages
Входные данные

{
  "pages": [
      "1": {
        "number": int,
        "text": string
      },
      "2": {
        "number": int,
        "text": string
      },
      "3": {
        "number": int,
        "text": string
      },
      "4": {
        "number": int,
        "text": string
      },
      "5": {
        "number": int,
        "text": string
      }
    ];
}
Описание

Загрузка страниц проекта

Коды возврата

200 - Успешно
404 - Проект не найден
403 - Нет прав на просмотр проекта
204 - В проекте нет страниц
500 - Внутренняя ошибка сервера

DELETE /api/page/deletePage
Входные данные

{
   "page_id": int;
}
Описание

Удаление страницы из сценария

Коды возврата

200 - Успешно
404 - Страница не найдена
403 - Нет прав на удаление страницы
500 - Внутренняя ошибка сервера

POST /api/page/redoPage
Входные данные

{
   "page_id": int;
   "text": str;
}
Описание

Редактирование страницы из сценария

Коды возврата

200 - Успешно
400 - Пустой текст
404 - Страница не найдена
403 - Нет прав на редактирование страницы
500 - Внутренняя ошибка сервера

POST /api/page/newPage
Выходные данные

{
   "page_id": int;
}
Описание

Создание страницы в сценарии

Коды возврата

201 - Страница создана
403 - Нет прав на создание страницы в проекте
500 - Внутренняя ошибка сервера

GET /api/page/{page_id}/loadPage
Выходные данные

{
   "text": str;
}
Описание

Загрузка текста страницы

Коды возврата

200 - Успешно
404 - Страница не найдена
403 - Нет прав на чтение страницы
500 - Внутренняя ошибка сервера

GET /api/users/{user_name}/loadInfo
Входные данные

{
   "projects":
    [
        {
      	    "project1_id": int;
            "project1_name": str
     	},
        {
      	    "project2_id": int;
            "project2_name": str
     	},
        {
      	    "project3_id": int;
            "project3_name": str
     	},
	{
      	    "project4_id": int;
            "project4_name": str
     	}
   ];
}
Описание

Загрузка личного кабинета пользователя

Коды возврата

200 - Успешно
404 - Пользователь не найден
204 - У пользователя нет проектов
500 - Внутренняя ошибка сервера

POST /api/user/createProject
Входные данные

{
    "name": str;
    "login": str;
}
Выходные данные

{
    "project_id": int;
}
Описание

Создание нового проекта пользователя

Коды возврата

201 - Проект создан
400 - Пустое название проекта
404 - Пользователь не найден
409 - Проект с таким названием у пользователя уже существует
500 - Внутренняя ошибка сервера

POST /api/user/updateProjectInfo
Входные данные

{
    "project_id": int;
    "name": str
}
Описание

Изменение информации о проекте

Коды возврата

200 - Успешно
400 - Некорректные данные для обновления
404 - Проект не найден
403 - Нет прав на изменение проекта
500 - Внутренняя ошибка сервера

DELETE /api/user/deleteUser
Входные данные

{
    "login": str;
}
Описание

Удаление пользователем аккаунта пользователя

Коды возврата

200 - Успешно
404 - Пользователь не найден
403 - Нет прав на удаление этого аккаунта
409 - У пользователя есть активные проекты
500 - Внутренняя ошибка сервера

DELETE /api/user/deleteProject
Входные данные

{
    "project_id": int;
}
Описание

Удаление пользователем проекта

Коды возврата

200 - Успешно
404 - Проект не найден
403 - Нет прав на удаление проекта
500 - Внутренняя ошибка сервера

DELETE /api/admin/dropAdmin
Входные данные

{
    "login": str;
}
Описание

Снятие роли администратора

Коды возврата

200 - Успешно
400 - Пользователь не является администратором
404 - Пользователь не найден
403 - Недостаточно прав для выполнения операции
500 - Внутренняя ошибка сервера

DELETE /api/admin/project/deleteProject
Входные данные

{
    "project_id": int;
}
Описание

Удаление админом проекта

Коды возврата

200 - Успешно
404 - Проект не найден
403 - Недостаточно прав (требуются права администратора)
500 - Внутренняя ошибка сервера

GET /api/admin/user/loadUsersAccounts
Выходные данные

{
   "users":
    [
        {
      	    "login1": str;
     	},
        {
      	    "login2": str;
     	},
        {
      	    "login3": str;
     	},
        {
      	    "login4": str;
     	}
   ];}
Описание

Загрузка аккаунтов всех пользователей веб-приложения

Коды возврата

200 - Успешно
403 - Недостаточно прав (требуются права администратора)
204 - Пользователи не найдены
500 - Внутренняя ошибка сервера

DELETE /api/admin/user/deleteAccount
Входные данные

{
    "login": str;
}
Описание

Удаление админом пользователя

Коды возврата

200 - Успешно
404 - Пользователь не найден
403 - Недостаточно прав (требуются права администратора)
400 - Нельзя удалить самого себя
500 - Внутренняя ошибка сервера

POST /api/admin/user/upgradeAccount
Входные данные

{
    "login": str;
}
Описание

Повышение пользователя до администратора

Коды возврата

200 - Успешно
400 - Пользователь уже является администратором
404 - Пользователь не найден
403 - Недостаточно прав для выполнения операции
500 - Внутренняя ошибка сервера

POST /api/graphic/saveImage
Входные данные

{
    "picture": FormData
    "frame_id": int
}
Описание

Сохранение результата работы графического редактора

Коды возврата

200 - Успешно
400 - Некорректные данные изображения
413 - Слишком большой размер изображения
500 - Ошибка при сохранении файла

GET /api/graphic/{pic_path}loadImage
Входные данные

{
    "picture": FormData
}
Описание

Загрузка изображения в редактор

Коды возврата

200 - Успешно
404 - Изображение не найдено по указанному пути
500 - Ошибка при чтении файла